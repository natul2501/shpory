<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
	<title>Diary</title>
	<link rel="icon" type="image/png" href="media/icon.png">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
	<meta name="robots" content="noindex, nofollow"> <!-- Ñ€Ğ¾Ğ±Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ¾Ñ€Ñ–Ğ½ĞºÑƒ Ğ¿Ñ€Ğ¸Ñ…Ğ¾Ğ²Ğ°Ğ½Ğ¾Ñ Ğ²Ñ–Ğ´ Ğ¿Ğ¾ÑˆÑƒĞºĞ¾Ğ²Ğ¸Ñ… Ğ±Ğ¾Ñ‚Ñ–Ğ² -->
</head>
<body>
<!------------------------------ HEADER----------------------------------->
	<header id="header">
		<h2>TAGEBUCH</h2>
		<!--<div id="descr">ĞĞ¿Ğ¸Ñ</div>-->
		<div id="menuMob">
            <button id="newArticleMenuButton" onclick="showmenu()" title="Menu">
                <i class="fa-solid fa-bars" id="newArticleMenuButtonIcon"></i>
            </button>
        </div>
	</header>
	<div id="panelInstruments">
		<a class="panelInstrumentsButton" href="/diary/public/flysquirrel-diary/ua">ğŸ‡ºğŸ‡¦</a>
		<a class="panelInstrumentsButton" href="/diary/public/flysquirrel-diary/de">ğŸ‡©ğŸ‡ª</a>
		<% if(user) { %>
			<a class="panelInstrumentsButton" href="/diary/public/flysquirrel-diary/logout">Abmelden</a>
		<% } %>
		<% if(!user) { %>
			<a class="panelInstrumentsButton" href="/diary/public/flysquirrel-diary/login-de">Anmelden</a>
		<% } %>
	</div>
<!------------------------------ MENUS----------------------------------->
	<div id="menu">
		<div id="panelInstrumentsMob">
			<div class="PIButtContainer">
				<a class="PIButt" href="/diary/public/flysquirrel-diary/ua">ğŸ‡ºğŸ‡¦</a>
				<a class="PIButt" href="/diary/public/flysquirrel-diary/de">ğŸ‡©ğŸ‡ª</a>
			</div>
			<div class="PIButtContainer">
				<% if(user) { %>
					<a class="PIButt" href="/diary/public/flysquirrel-diary/logout">Abmelden</a>
				<% } %>
				<% if(!user) { %>
					<a class="PIButt" href="/diary/public/flysquirrel-diary/login-de">Anmelden</a>
				<% } %>
			</div>
		</div>
		<ul>
			<li><a href="/" class="menuLink">Hauptseite</a></li>
			<li><a href="/diary/public/diaries.html" class="menuLink">Diaries</a></li>
			<li><a href="/diary/public/flysquirrel-diary/" class="menuLink">Artikel Ãœbersicht</a></li>
			<li><a href="/diary/public/flysquirrel-diary/galerie" class="menuLink">Galerie</a></li>
			<% if(author) author.forEach(d => {
				if (d === 'flysquirrel-diary') { %>
				<li><a href="/diary/public/newArticle.html" class="menuLink">Neuer Artikel</a></li>
			<% }}) %>
		</ul>
		<div id="menuTagsMob">
			<center><div id="menuTagsMobHeader">Tags</div></center>
			<% tags.forEach(tag => { %>
				<div class="tagLinkContainer">
					<a href="/diary/public/<%- authorLink %>/searchResults/<%- tag.name %>"
						class="tagLink"
						style="font-size:<%=16+(tag.count*0.5)%>px;">
							<%- tag.name %>
					</a>
				</div>&nbsp; 
				<% }) %>
		</div>
	</div>
<!------------------------------ CONTENT----------------------------------->
	<div class="container">
		<div class="eventt">
			<div id="controls">
				<% if(author) author.forEach(d => {
					if (d === 'flysquirrel-diary') { %>
				<span>
					<a class="iconStyle" href="/diary/public/<%- authorLink %>/<%- articleId %>/remove" onclick="return confirmDeleteArticle(event)">
						<i class="fa-solid fa-trash" title="Artikel lÃ¶schen"></i>
					</a>
				</span>
				<span>
					<a class="iconStyle" href="/diary/public/newArticle-de.html?id=<%- articleId %>">
						<i class="fa-solid fa-pen-to-square" title="Artikel bearbeiten"></i>
					</a>
				</span>
				<% }}) %><br>
				<span><a href="/diary/public/flysquirrel-diary" class="iconStyle">ZurÃ¼ck zum Ãœbersicht</a></span>
			</div>
			<div id="articleTime">
				<i class="<%- articleSymbol %>" title="<%- title %>"></i>
				<span style="color: gray; font-weight: normal; font-style: italic;"> (<%- title %>)</span>
				<% if(viewerslist && (viewerslist.length > 0)) {%>
					<i style="color: gray; font-weight: normal; font-style: italic;">( <%- viewerslist.join(', ') %> )</i>
				<%}%><br>
				<%- article.date %>
			</div>
			<div class="about"><%- article.content %></div>
			<div class="tags">Tags: <%- article.tags %></div>
			<p>&nbsp;</p>
			<div id="commentContainer">
			<h4 id="commentContainerDescription">Kommentare:</h4>
				<div id="addComment">
					<details>
						<summary><span id="commentFormDescr">Kommentar hinzufÃ¼gen:<br></span></summary>
						<form name="commentForm" id="commentForm" method="post" action="/diary/public/flysquirrel-diary/comment">
							<input type="hidden" name="articleId" value="<%- articleId %>">
							<textarea name="commentFormText" id="commentFormText"></textarea><br>
							<input name="commentInput" id="commentInput" type="submit" value="Kommentar senden"/>
					</form>
					</details>
				</div>
				<p>&nbsp;</p>
				<div class="commetContainer">
					<% article.comments.forEach(comment => { %>
						<% if(comment.author) { %>
						<div class="commetDiv">
							<div id="controls">
								<% if (user.username === comment.author) { %>
									<form method="POST" action="/diary/public/<%- authorLink %>/<%- articleId %>/removeComment" style="display:inline;"
										onsubmit="return confirmDeleteComment(event)">
										<input type="hidden" name="commentDate" value="<%- comment.date %>">
										<button type="submit" class="iconStyle" style="background:none; border:none; cursor:pointer;">
										  <i class="fa-solid fa-trash" title="Kommentar lÃ¶schen"></i>
										</button>
									  </form>
								<% } else  if(author){%>
								<% author.forEach(d => { %>
									<% if (d === 'flysquirrel-diary') { %>
										<form method="POST" action="/diary/public/<%- authorLink %>/<%- articleId %>/removeComment" style="display:inline;"
											onsubmit="return confirmDeleteComment(event)">
											<input type="hidden" name="commentDate" value="<%- comment.date %>">
											<button type="submit" class="iconStyle" style="background:none; border:none; cursor:pointer;">
											  <i class="fa-solid fa-trash" title="Kommentar lÃ¶schen"></i>
											</button>
										  </form>
									<% } %> <!-- Ğ—Ğ°ĞºÑ€Ğ¸Ğ²Ğ°ÑÑ‡Ğ¸Ğ¹ Ñ‚ĞµĞ³ Ğ´Ğ»Ñ if (d === 'flysquirrel-diary') -->
								<% })} %> <!-- Ğ—Ğ°ĞºÑ€Ğ¸Ğ²Ğ°ÑÑ‡Ğ¸Ğ¹ Ñ‚ĞµĞ³ Ğ´Ğ»Ñ forEach(d => { -->
							</div>
							
							<div class="commentAuthor"><%- comment.author %></div>
							<div class="commentDate"><%- comment.date %></div>
							<div class="commentText"><%- comment.commentText %></div>
						</div>
					<% }}) %>
				</div>
			</div>
		</div>
	</div>
	<div id="menuTags">
		<center><b>Tags</b></center>
		<% tags.forEach(tag => { %>
			<a href="/diary/public/<%- authorLink %>/searchResults/<%- tag.name %>"
				class="tagLink"
				style="font-size:<%=14+(tag.count*0.5)%>px;">
					<%- tag.name %>
				</a>&nbsp; 
			<% }) %>
	</div>
	<footer>Durch die Nutzung dieser Website erklÃ¤ren Sie sich mit den <a href="/diary/public/flysquirrel-diary/TermsOfUse-de" id="footerLink">Nutzungsbedingungen</a> einverstanden</footer>
	<script>
		function confirmDeleteArticle(event) {
			const isConfirmed = confirm("MÃ¶chten Sie den Artikel wirklich lÃ¶schen?");
			if (!isConfirmed) {
			event.preventDefault(); // Ğ‘Ğ»Ğ¾ĞºÑƒÑ”Ğ¼Ğ¾ Ğ¿ĞµÑ€ĞµÑ…Ñ–Ğ´, ÑĞºÑ‰Ğ¾ Ğ½Ğ°Ñ‚Ğ¸ÑĞ½ÑƒÑ‚Ğ¾ "ĞÑ–"
			}
			return isConfirmed; // Ğ”Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑÑ” Ğ°Ğ±Ğ¾ Ğ·Ğ°Ğ±Ğ¾Ñ€Ğ¾Ğ½ÑÑ” Ğ¿ĞµÑ€ĞµÑ…Ñ–Ğ´
		}
		function confirmDeleteComment(event) {
		  const isConfirmed = confirm("MÃ¶chten Sie den Kommentar wirklich lÃ¶schen?");
		  if (!isConfirmed) {
			event.preventDefault(); // Ğ¡ĞºĞ°ÑĞ¾Ğ²ÑƒÑ”Ğ¼Ğ¾ Ğ²Ñ–Ğ´Ğ¿Ñ€Ğ°Ğ²ĞºÑƒ Ñ„Ğ¾Ñ€Ğ¼Ğ¸, ÑĞºÑ‰Ğ¾ Ğ½Ğ°Ñ‚Ğ¸ÑĞ½ÑƒÑ‚Ğ¾ "ĞÑ–"
		  }
		  return isConfirmed; // ĞŸĞ¾Ğ²ĞµÑ€Ñ‚Ğ°Ñ”Ğ¼Ğ¾ true Ğ°Ğ±Ğ¾ false, Ñ‰Ğ¾Ğ± ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑĞ²Ğ°Ñ‚Ğ¸ Ğ²Ñ–Ğ´Ğ¿Ñ€Ğ°Ğ²ĞºÑƒ Ñ„Ğ¾Ñ€Ğ¼Ğ¸
		}
		function showmenu(){
			let menu = document.getElementById('menu');
			if(menu.style.display == 'block'){
				menu.style.display = 'none';
			} else {
				menu.style.display = 'block';
			}
		}
		function applyStyles() {
			const existing = document.getElementById("dynamic-styles");
			if (existing) existing.remove(); // Ğ²Ğ¸Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğ¸ Ğ¿Ğ¾Ğ¿ĞµÑ€ĞµĞ´Ğ½Ñ–Ğ¹ ÑÑ‚Ğ¸Ğ»ÑŒ
			const link = document.createElement("link");
			link.rel = "stylesheet";
			link.type = "text/css";
			link.id = "dynamic-styles";
			if (window.innerHeight > window.innerWidth) {
				link.href = "/diary/public/css/diarystyleMob.css";
			} else {
				link.href = "/diary/public/css/diarystyle.css";
			}
			document.head.appendChild(link);
		}
		applyStyles();// Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°Ñ”Ğ¼Ğ¾ Ğ¿Ñ€Ğ¸ Ğ·Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ–
		window.addEventListener("resize", applyStyles);// ĞŸĞµÑ€Ğµ-Ğ¿ĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ·Ğ¼Ñ–Ğ½Ñ– Ñ€Ğ¾Ğ·Ğ¼Ñ–Ñ€Ñƒ Ğ²Ñ–ĞºĞ½Ğ°
	</script>
</body>
</html>