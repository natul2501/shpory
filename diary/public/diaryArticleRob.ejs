<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
	<title>Diary</title>
	<link rel="icon" type="image/png" href="media/icon.png">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
	<meta name="robots" content="noindex, nofollow"> <!-- —Ä–æ–±–∏—Ç—å —Å—Ç–æ—Ä—ñ–Ω–∫—É –ø—Ä–∏—Ö–æ–≤–∞–Ω–æ—é –≤—ñ–¥ –ø–æ—à—É–∫–æ–≤–∏—Ö –±–æ—Ç—ñ–≤ -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<!------------------------------ HEADER----------------------------------->
	<header id="header">
		<h2 id="headerHeader">–©–û–î–ï–ù–ù–ò–ö</h2>
		<!--<div id="descr">–û–ø–∏—Å</div>-->
		<div id="menuMob">
            <button id="newArticleMenuButton" onclick="showmenu()" title="–ú–µ–Ω—é">
                <i class="fa-solid fa-bars" id="MBSymbol"></i>
            </button>
        </div>
	</header>
	<div id="panelInstruments">
		<a class="panelInstrumentsButton" href="/diary/public/flysquirrel-diary/ua">üá∫üá¶</a>
		<a class="panelInstrumentsButton" href="/diary/public/flysquirrel-diary/de">üá©üá™</a>
		<% if(user) { %>
			<a class="panelInstrumentsButton" href="/diary/public/flysquirrel-diary/logout">–í–∏–π—Ç–∏ —ñ–∑ –∞–∫–∞—É–Ω—Ç–∞</a>
		<% } %>
		<% if(!user) { %>
			<a class="panelInstrumentsButton" href="/diary/public/flysquirrel-diary/login">–£–≤—ñ–π—Ç–∏ –≤ –∞–∫–∞—É–Ω—Ç</a>
		<% } %>
	</div>
<!------------------------------ MENUS----------------------------------->
	<div id="menu">
		<div id="panelInstrumentsMob">
			<div class="PIButtContainer">
				<a class="PIButt" href="/diary/public/flysquirrel-diary/ua">üá∫üá¶</a>
				<a class="PIButt" href="/diary/public/flysquirrel-diary/de">üá©üá™</a>
			</div>
			<div class="PIButtContainer">
				<% if(user) { %>
					<a class="PIButt" href="/diary/public/flysquirrel-diary/logout">–í–∏–π—Ç–∏ —ñ–∑ –∞–∫–∞—É–Ω—Ç–∞</a>
				<% } %>
				<% if(!user) { %>
					<a class="PIButt" href="/diary/public/flysquirrel-diary/login">–£–≤—ñ–π—Ç–∏ –≤ –∞–∫–∞—É–Ω—Ç</a>
				<% } %>
			</div>
		</div>
		<ul>
			<li><a href="/" class="menuLink">–ì–æ–ª–æ–≤–Ω–∞</a></li>
			<li><a href="/diary/public/diaries.html" class="menuLink">–©–æ–¥–µ–Ω–Ω–∏–∫–∏</a></li>
			<li><a href="/diary/public/robert-diary/" class="menuLink">–°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å—ñ–≤</a></li>
			<li><a href="/diary/public/robert-diary/galerie" class="menuLink">–ì–∞–ª–µ—Ä–µ—è</a></li>
			<% if(author) author.forEach(d => {
				if (d === 'robert-diary') { %>
				<li><a href="/diary/public/newArticleRob.html" class="menuLink">–ù–æ–≤–∏–π –∑–∞–ø–∏—Å</a></li>
			<% }}) %>
		</ul>
		<div id="menuTagsMob">
			<center><div id="menuTagsMobHeader">–¢–µ–≥–∏</div></center>
			<% tags.forEach(tag => { %>
				<div class="tagLinkContainer">
					<a href="/diary/public/<%- authorLink %>/searchResults/<%- tag.name %>"
						class="tagLink"
						style="font-size:<%=16+(tag.count*0.5)%>px;">
							<%- tag.name %>
					</a>
				</div>&nbsp; 
				<% }) %>
		</div>
	</div>
<!------------------------------ CONTENT----------------------------------->
	<div id="imageModal" style="display:none;">
		<div id="imageModalContent">
			<button id="closeImageModal">&times;</button>
			<img id="modalImage" src="" alt="–ó–±—ñ–ª—å—à–µ–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è">
		</div>
	</div>
	<div class="container">
		<div class="eventt">
			<div id="controls">
				<% if(author) author.forEach(d => {
					if (d === 'robert-diary') { %>
				<span>
					<a class="iconStyle" href="/diary/public/<%- authorLink %>/<%- articleId %>/remove" onclick="return confirmDeleteArticle(event)">
						<i class="fa-solid fa-trash" title="–í–∏–¥–∞–ª–∏—Ç–∏ —Å—Ç–∞—Ç—Ç—é"></i>
					</a>
				</span>
				<span>
					<a class="iconStyle" href="/diary/public/newArticleRob.html?id=<%- articleId %>">
						<i class="fa-solid fa-pen-to-square" title="–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ —Å—Ç–∞—Ç—Ç—é"></i>
					</a>
				</span>
				<% }}) %><br>
				<span><a href="/diary/public/robert-diary" class="iconStyle">–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ —Å–ø–∏—Å–∫—É –∑–∞–ø–∏—Å—ñ–≤</a></span>
			</div>
			<div id="articleTime">
				<%- article.date %>
				<i class="<%- articleSymbol %>" title="<%- title %>"></i>
				<span style="color: gray; font-weight: normal; font-style: italic;"> (<%- title %>)</span>
				<span>
					<a class="iconStyle" href="/diary/public/robert-diary/printArticle?articleId=<%- articleId %>" title="–ù–∞–¥—Ä—É–∫—É–≤–∞—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É">
						<i class="fa-solid fa-print"></i>
					</a>
				</span>
			</div>
			<div class="about"><%- article.content %></div>
			<div class="tags"><%- article.tags %></div>
			<p>&nbsp;</p>
			<div id="commentContainer">
			<h4 id="commentContainerDescription">–ö–æ–º–µ–Ω—Ç–∞—Ä—ñ:</h4>
				<div id="addComment">
					<details>
						<summary><span id="commentFormDescr">–î–æ–¥–∞—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä:<br></span></summary>
						<form name="commentForm" id="commentForm" method="post" action="/diary/public/robert-diary/comment">
							<input type="hidden" name="articleId" value="<%- articleId %>">
							<textarea name="commentFormText" id="commentFormText"></textarea><br>
							<input name="commentInput" id="commentInput" type="submit" value="–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä"/>
					</form>
					</details>
				</div>
				<p>&nbsp;</p>
				<div class="commetContainer">
					<% article.comments.forEach(comment => { %>
						<% if(comment.author) { %>
						<div class="commetDiv">
							<div id="controls">
								<% if (user && user.username === comment.author) { %>
									<form method="POST" action="/diary/public/<%- authorLink %>/<%- articleId %>/removeComment" style="display:inline;"
										onsubmit="return confirmDeleteComment(event)">
										<input type="hidden" name="commentDate" value="<%- comment.date %>">
										<button type="submit" class="iconStyle" style="background:none; border:none; cursor:pointer;">
										  <i class="fa-solid fa-trash" title="–í–∏–¥–∞–ª–∏—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä"></i>
										</button>
									  </form>
								<% } else if(author) {%>
								<% author.forEach(d => { %>
									<% if (d === 'robert-diary') { %>
										<form method="POST" action="/diary/public/<%- authorLink %>/<%- articleId %>/removeComment" style="display:inline;"
											onsubmit="return confirmDeleteComment(event)">
											<input type="hidden" name="commentDate" value="<%- comment.date %>">
											<button type="submit" class="iconStyle" style="background:none; border:none; cursor:pointer;">
											  <i class="fa-solid fa-trash" title="–í–∏–¥–∞–ª–∏—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä"></i>
											</button>
										  </form>
									<% } %> <!-- –ó–∞–∫—Ä–∏–≤–∞—é—á–∏–π —Ç–µ–≥ –¥–ª—è if (d === 'robert-diary') -->
								<% })} %> <!-- –ó–∞–∫—Ä–∏–≤–∞—é—á–∏–π —Ç–µ–≥ –¥–ª—è forEach(d => { -->
							</div>
							
							<div class="commentAuthor"><%- comment.author %></div>
							<div class="commentDate"><%- comment.date %></div>
							<div class="commentText"><%- comment.commentText %></div>
						</div>
					<% }}) %>
				</div>
			</div>
		</div>
	</div>
	<div id="menuTags">
		<center><b>–¢–µ–≥–∏</b></center>
		<% tags.forEach(tag => { %>
			<a href="/diary/public/<%- authorLink %>/searchResults/<%- tag.name %>"
				class="tagLink"
				style="font-size:<%=14+(tag.count*0.5)%>px;">
					<%- tag.name %>
				</a>&nbsp; 
			<% }) %>
	</div>
	<script>
		function confirmDeleteArticle(event) {
			const isConfirmed = confirm("–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ —Å—Ç–∞—Ç—Ç—é?");
			if (!isConfirmed) {
			event.preventDefault(); // –ë–ª–æ–∫—É—î–º–æ –ø–µ—Ä–µ—Ö—ñ–¥, —è–∫—â–æ –Ω–∞—Ç–∏—Å–Ω—É—Ç–æ "–ù—ñ"
			}
			return isConfirmed; // –î–æ–∑–≤–æ–ª—è—î –∞–±–æ –∑–∞–±–æ—Ä–æ–Ω—è—î –ø–µ—Ä–µ—Ö—ñ–¥
		}
		function confirmDeleteComment(event) {
		  const isConfirmed = confirm("–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä?");
		  if (!isConfirmed) {
			event.preventDefault(); // –°–∫–∞—Å–æ–≤—É—î–º–æ –≤—ñ–¥–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º–∏, —è–∫—â–æ –Ω–∞—Ç–∏—Å–Ω—É—Ç–æ "–ù—ñ"
		  }
		  return isConfirmed; // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ true –∞–±–æ false, —â–æ–± –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏ –≤—ñ–¥–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º–∏
		}
		function showmenu(){
			let menu = document.getElementById('menu');
			if(menu.style.display == 'block'){
				menu.style.display = 'none';
			} else {
				menu.style.display = 'block';
			}
		}
		function applyStyles() {
			const existing = document.getElementById("dynamic-styles");
			if (existing) existing.remove(); // –≤–∏–¥–∞–ª–∏—Ç–∏ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π —Å—Ç–∏–ª—å
			const link = document.createElement("link");
			link.rel = "stylesheet";
			link.type = "text/css";
			link.id = "dynamic-styles";
			if (window.innerHeight > window.innerWidth) {
				link.href = "/diary/public/css/diaryRobstyleMob.css";
			} else {
				link.href = "/diary/public/css/diaryRobstyle.css";
			}
			document.head.appendChild(link);
		}
		applyStyles();// –ó–∞–ø—É—Å–∫–∞—î–º–æ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
		window.addEventListener("resize", applyStyles);// –ü–µ—Ä–µ-–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∏ –∑–º—ñ–Ω—ñ —Ä–æ–∑–º—ñ—Ä—É –≤—ñ–∫–Ω–∞
/*----------- –∑–±—ñ–ª—å—à–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É -----------------*/
		document.querySelectorAll('.about img').forEach(img => {
			img.style.cursor = 'pointer';
			img.addEventListener('click', () => {
			const modal = document.getElementById('imageModal');
			const modalImg = document.getElementById('modalImage');
			modalImg.src = img.src;
			modal.style.display = 'flex';
			});
		});
		document.getElementById('closeImageModal').addEventListener('click', () => {
			document.getElementById('imageModal').style.display = 'none';
		});
	</script>
</body>
</html>