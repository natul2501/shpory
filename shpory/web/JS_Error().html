<!DOCTYPE html>
<html>
<head>
	<title>Error()</title>
	<style>
		p{	text-indent: 55px;
			margin: 3px;
		}
		.fll{
			float: left;
			width: 150px;
		}
		table, td, th{
			border: 1px solid lightgray;
       		border-collapse: collapse;
       		line-height: 18px;
       		padding: 0px 6px 0px 6px;
		}
		.fst{
			/*font-style:oblique;*/
			font-color: #812B2B;
			line-height: 15px;
			color: #2F4F4F;
			}
	</style>
</head>
<body style="font-family: Calibri; font-size: 12px;">
<h3 style="text-align: center">Перехват ошибок</h3>
	<p>Введите число от 5 до 10:</p>
	<div class="fll" style="text-indent: 15px">id="In"</div>
	<div class="fll" style="text-indent: 15px">onclick="myFunction()</div>
	<div class="fll" style="text-indent: 15px">id="Out"</div>
	<input style="clear: left" class="fll" id="In" type="text">
	<button class="fll" type="button" onclick="myFunction()">Проверка ввода</button>
	<div class="fll" id="Out"></div>

<table style="clear: left; margin-top: 60px">
	<tr>
		<td rowspan="4" style="width: 300px">
			<pre class="fst">function myFunction() {
	var message, x;
	message = document.getElementById("Out");
	message.innerHTML = "";
	x = document.getElementById("In").value;
	try { 
		if(x == "") throw "пусто";
		if(isNaN(x)) throw "не число";
		x = Number(x);
		if(x < 5) throw "слишком мало";
		if(x > 10) throw "слишком много";
	}
	catch(err) {
		message.innerHTML = "Вы ввели " + err;
	}
	finally {
		document.getElementById("In").value = "Попробуй ещё!";
	}
}</pre>	</td>
		<td  style="width: 30px;"><b><i>try</i></b></td>
		<td  style="width: 300px">определяет блок кода, который во время выполнения будет проверяться на возникновение ошибок; если ошибка -> генерирует err</td>
	</tr>
	<tr>
		<td><b><i>throw</i></b></td>
		<td>позволяет генерировать пользовательские ошибки err</td>
	</tr>
	<tr>
		<td><b><i>catch</i></b></td>
		<td>определяет блок кода, который будет выполняться, если в блоке оператора try возникнет ошибка</td>
	</tr>
	<tr>
		<td><b><i>finally</i></b></td>
		<td>позволяет выполнить код после операторов try и catch, независимо от результатов проверки</td>
	</tr>
</table>

<p><i>* Современные браузеры часто используют комбинацию JavaScript и встроенной HTML проверки, реализуемой при помощи предопределенных правил, заданных в HTML атрибутах:<br>
&lt;input id="demo" type="number" min="5" max="10" step="1"&gt;:</i>
<input id="demo" type="number" min="5" max="10" step="1"></p>

<script>
function myFunction() {
    var message, x;
    message = document.getElementById("Out");
    message.innerHTML = "";
    x = document.getElementById("In").value;
    try { 
        if(x == "") throw "пусто";
        if(isNaN(x)) throw "не число";
        x = Number(x);
        if(x < 5) throw "слишком мало";
        if(x > 10) throw "слишком много";
    }
    catch(err) {
        message.innerHTML = "Вы ввели " + err;
    }
    finally {
        document.getElementById("In").value = "Попробуй ещё!";
    }
}
</script>


<h3 style="text-align: center">Error()</h3>
<p><i>В JavaScript есть встроенный объект Error, который предоставляет информацию по возникшей ошибке</i></p>
<table>
	<tr>
		<th>N</th>
		<th>err.name</th>
		<th>err.message</th>
		<th>describe</th>
	</tr>
	<tr>
		<td>1</td>
		<td><span id="A1"></span></td>
		<td><span id="A2"></span></td>
		<td> - RangeError возникает, если вы используете число, которое выходит за пределы диапазона допустимых значений</td>
	</tr>
	<tr>
		<td>2</td>
		<td><span id="B1"></span></td>
		<td><span id="B2"></span></td>
		<td> - ReferenceError возникает в том случае, когда вы используете (ссылаетесь) переменную, которая не была декларирована</td>
	</tr>
	<tr>
		<td>3</td>
		<td><span id="C1"></span></td>
		<td><span id="C2"></span></td>
		<td> - SyntaxError возникает, когда вы пытаетесь выполнить код с синтаксическими ошибками</td>
	</tr>
	<tr>
		<td>4</td>
		<td><span id="D1"></span></td>
		<td><span id="D2"></span></td>
		<td> - TypeError возникает, когда вы используете значение, выходящее за пределы диапазона ожидаемых типов</td>
	</tr>
	<tr>
		<td>5</td>
		<td><span id="E1"></span></td>
		<td><span id="E2"></span></td>
		<td> - URIError возникает, когда вы используете недопустимые символы в функциях URI</td>
	</tr>
</table>

<script>
	var num = 1;
		try {num.toPrecision(500);}
		// Число не может иметь 500 знаковых цифр
		catch(err) {document.getElementById("A1").innerHTML = err.name;
					document.getElementById("A2").innerHTML = err.message;}
	var x;
		try {x = y + 1;}
		catch(err) {document.getElementById("B1").innerHTML = err.name;
					document.getElementById("B2").innerHTML = err.message;}
		try {eval("alert('Hello)");}
		catch(err) {document.getElementById("C1").innerHTML = err.name;
					document.getElementById("C2").innerHTML = err.message;}
		try {num.toUpperCase();}
		catch(err) {document.getElementById("D1").innerHTML = err.name;
					document.getElementById("D2").innerHTML = err.message;}
		try {decodeURI("%%%");}
		catch(err) {document.getElementById("E1").innerHTML = err.name;
					document.getElementById("E2").innerHTML = err.message;}
</script>


<h3 style="text-align: center">Влидация форм. Методы DOM ограничивающей проверки. ECMAScript 6 (2015)</h3>
<p><i>Введите число от 10 до 100 с шагом 10</i></p>
<input id="idc" type="number" min="10" max="100" step="10" maxlength="1" pattern="[0-9]{1}-0" required>
<button onclick="myFunction()">OK</button>
<span id="ic"></span>
<table>
	<tr>
		<td>1</td>
		<td>checkValidity()</td>
		<td><span id="J3"></span></td>
		<td> - возвращает true, если элемент ввода содержит корректные данные</td>
	</tr>
	<tr>
		<td>2</td>
		<td>setCustomValidity()</td>
		<td><span id="K3"></span></td>
		<td> - устанавливает свойство validationMessage для элемента ввода</td>
	</tr>
	<tr>
		<th colspan="4">document.getElementById("idc").validity.errName</th>
	</tr>
	<tr>
		<th>N</th>
		<th>errName</th>
		<th>validity</th>
		<th>describe</th>
	</tr>
	<tr>
		<td>1</td>
		<td>rangeOverflow</td>
		<td><span id="A3"></span></td>
		<td> - значение элемента больше значения в атрибуте max</td>
	</tr>
	<tr>
		<td>2</td>
		<td>rangeUnderflow</td>
		<td><span id="B3"></span></td>
		<td> - значение элемента меньше значения в атрибуте min</td>
	</tr>
	<tr>
		<td>3</td>
		<td>stepMismatch</td>
		<td><span id="C3"></span></td>
		<td> - значение элемента неверно по атрибуту step (шаг)</td>
	</tr>
	<tr>
		<td>4</td>
		<td>typeMismatch</td>
		<td><span id="D3"></span></td>
		<td> - значение элемента неверно по атрибуту type</td>
	</tr>
	<tr>
		<td>5</td>
		<td>tooLong</td>
		<td><span id="E3"></span></td>
		<td> - значение элемента превышает значение атрибута maxLength (макс. длина)</td>
	</tr>
	<tr>
		<td>6</td>
		<td>valueMissing</td>
		<td><span id="F3"></span></td>
		<td> - не заполнено поле, обязательное к заполнению (у элемента с required нет значения)</td>
	</tr>
	<tr>
		<td>7</td>
		<td>patternMismatch</td>
		<td><span id="G3"></span></td>
		<td> - значение элемента не соответствует шаблону в атрибуте pattern</td>
	</tr>
	<tr>
		<td>8</td>
		<td>customError</td>
		<td><span id="H3"></span></td>
		<td> - задано пользовательское сообщение о валидности</td>
	</tr>
	<tr>
		<td>9</td>
		<td>valid</td>
		<td><span id="I3"></span></td>
		<td> - значение элемента валидно</td>
	</tr>
</table>

<script>
	function myFunction() {
		document.getElementById("A3").innerHTML = "";
		document.getElementById("B3").innerHTML = "";
		document.getElementById("C3").innerHTML = "";
		document.getElementById("D3").innerHTML = "";
		document.getElementById("E3").innerHTML = "";
		document.getElementById("F3").innerHTML = "";
		document.getElementById("G3").innerHTML = "";
		document.getElementById("H3").innerHTML = "";
		document.getElementById("I3").innerHTML = "";
		var val = document.getElementById("idc");

	if (val.validity.rangeOverflow) {
		document.getElementById("A3").innerHTML = true;
	}
	if (val.validity.rangeUnderflow) {
		document.getElementById("B3").innerHTML = true;
	}
	if (val.validity.stepMismatch) {
		document.getElementById("C3").innerHTML = true;
	}
	if (val.validity.typeMismatch) {
		document.getElementById("D3").innerHTML = true;
	}
	if (val.validity.tooLong) {
		document.getElementById("E3").innerHTML = true;
	}	
	if (val.validity.valueMissing) {
		document.getElementById("F3").innerHTML = true;
	}
	if (val.validity.patternMismatch) {
		document.getElementById("G3").innerHTML = true;
	}
	if (val.validity.customError) {
		document.getElementById("H3").innerHTML = true;
	}	
	if (val.validity.valid) {
		document.getElementById("I3").innerHTML = true;
	}
	if (val.checkValidity()) {
		document.getElementById("J3").innerHTML = true;
		document.getElementById("K3").innerHTML = "";
	}
	if (!val.checkValidity()) {
		document.getElementById("K3").innerHTML = val.validationMessage;
	}
 }
</script>


<h3 style="text-align: center; margin-bottom: 1px;">"use strict";</h3>
<h4 style="text-align: center; margin-top: 1px;">Строгий режим Javascript. ECMAScript 5 (2009)</h4>
<p>Цель директивы "use strict" — указать, что код должен выполняться в, так называемом, "строгом режиме"</p>
<p>Строгий режим декларируется путем добавления директивы "use strict"; в начало скрипта или функции</p>
<p>Ограничения в строгом режиме:</p>
	<ol style="margin: 3px; text-indent: 45px; list-style-position: inside">
		<li>нельзя использовать переменные без декларирования;</li>
		<li>нельзя использовать объекты без декларирования;</li>
		<li>нельзя удалять переменную (или объект):;</li>
		<li>нельзя удалять функцию;</li>
		<li>нельзя удалять неудаляемые свойства;</li>
		<li>одинаковые имена параметров запрещены;</li>
		<li>восьмеричные числовые константы запрещены;</li>
		<li>восьмеричные экранированные символы запрещены("\010");</li>
		<li>запись в свойства, предназначенные только для чтения, запрещено;</li>
		<li>запись в свойства, предназначенные только для возврата значения, запрещено;</li>
		<li>нельзя использовать в качестве имени переменной строку "eval", строку "arguments";</li>
		<li>нельзя использовать выражение with;</li>
		<li>функции eval() запрещено создавать переменные в области видимости, где она была вызвана;</li>
		<li>нельзя использовать будущие зарезервированные слова: implements, interface, let, package, private, protected, public, static, yield;</li>
	</ol>
<br>
</body>
</html>